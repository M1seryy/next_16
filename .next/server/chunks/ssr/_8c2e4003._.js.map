{"version":3,"sources":["turbopack:///[project]/node_modules/@tanstack/query-core/src/mutation.ts","turbopack:///[project]/src/app/entities/api/books/books.query.ts","turbopack:///[project]/src/app/features/block/slug-block/index.ts","turbopack:///[project]/node_modules/@tanstack/query-core/build/modern/mutationObserver.js","turbopack:///[project]/node_modules/@tanstack/react-query/build/modern/useMutation.js","turbopack:///[project]/src/app/features/block/auth-block/auth-block.component.tsx","turbopack:///[project]/src/app/shared/ui/components/custom-card/index.ts","turbopack:///[project]/src/app/features/block/books-list-block/books-list-block.component.tsx","turbopack:///[project]/src/app/features/block/search-form-block/search-form-block.component.tsx","turbopack:///[project]/src/app/entities/api/books/books.api.ts","turbopack:///[project]/src/app/entities/api/favorites/favorites.query.ts","turbopack:///[project]/src/app/entities/api/favorites/favorites.api.ts"],"sourcesContent":["import { notifyManager } from './notifyManager'\nimport { Removable } from './removable'\nimport { createRetryer } from './retryer'\nimport type {\n  DefaultError,\n  MutationFunctionContext,\n  MutationMeta,\n  MutationOptions,\n  MutationStatus,\n} from './types'\nimport type { MutationCache } from './mutationCache'\nimport type { MutationObserver } from './mutationObserver'\nimport type { Retryer } from './retryer'\nimport type { QueryClient } from './queryClient'\n\n// TYPES\n\ninterface MutationConfig<TData, TError, TVariables, TOnMutateResult> {\n  client: QueryClient\n  mutationId: number\n  mutationCache: MutationCache\n  options: MutationOptions<TData, TError, TVariables, TOnMutateResult>\n  state?: MutationState<TData, TError, TVariables, TOnMutateResult>\n}\n\nexport interface MutationState<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TOnMutateResult = unknown,\n> {\n  context: TOnMutateResult | undefined\n  data: TData | undefined\n  error: TError | null\n  failureCount: number\n  failureReason: TError | null\n  isPaused: boolean\n  status: MutationStatus\n  variables: TVariables | undefined\n  submittedAt: number\n}\n\ninterface FailedAction<TError> {\n  type: 'failed'\n  failureCount: number\n  error: TError | null\n}\n\ninterface PendingAction<TVariables, TOnMutateResult> {\n  type: 'pending'\n  isPaused: boolean\n  variables?: TVariables\n  context?: TOnMutateResult\n}\n\ninterface SuccessAction<TData> {\n  type: 'success'\n  data: TData\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\nexport type Action<TData, TError, TVariables, TOnMutateResult> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction<TError>\n  | PendingAction<TVariables, TOnMutateResult>\n  | PauseAction\n  | SuccessAction<TData>\n\n// CLASS\n\nexport class Mutation<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TOnMutateResult = unknown,\n> extends Removable {\n  state: MutationState<TData, TError, TVariables, TOnMutateResult>\n  options!: MutationOptions<TData, TError, TVariables, TOnMutateResult>\n  readonly mutationId: number\n\n  #client: QueryClient\n  #observers: Array<\n    MutationObserver<TData, TError, TVariables, TOnMutateResult>\n  >\n  #mutationCache: MutationCache\n  #retryer?: Retryer<TData>\n\n  constructor(\n    config: MutationConfig<TData, TError, TVariables, TOnMutateResult>,\n  ) {\n    super()\n\n    this.#client = config.client\n    this.mutationId = config.mutationId\n    this.#mutationCache = config.mutationCache\n    this.#observers = []\n    this.state = config.state || getDefaultState()\n\n    this.setOptions(config.options)\n    this.scheduleGc()\n  }\n\n  setOptions(\n    options: MutationOptions<TData, TError, TVariables, TOnMutateResult>,\n  ): void {\n    this.options = options\n\n    this.updateGcTime(this.options.gcTime)\n  }\n\n  get meta(): MutationMeta | undefined {\n    return this.options.meta\n  }\n\n  addObserver(observer: MutationObserver<any, any, any, any>): void {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer)\n\n      // Stop the mutation from being garbage collected\n      this.clearGcTimeout()\n\n      this.#mutationCache.notify({\n        type: 'observerAdded',\n        mutation: this,\n        observer,\n      })\n    }\n  }\n\n  removeObserver(observer: MutationObserver<any, any, any, any>): void {\n    this.#observers = this.#observers.filter((x) => x !== observer)\n\n    this.scheduleGc()\n\n    this.#mutationCache.notify({\n      type: 'observerRemoved',\n      mutation: this,\n      observer,\n    })\n  }\n\n  protected optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === 'pending') {\n        this.scheduleGc()\n      } else {\n        this.#mutationCache.remove(this)\n      }\n    }\n  }\n\n  continue(): Promise<unknown> {\n    return (\n      this.#retryer?.continue() ??\n      // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n      this.execute(this.state.variables!)\n    )\n  }\n\n  async execute(variables: TVariables): Promise<TData> {\n    const onContinue = () => {\n      this.#dispatch({ type: 'continue' })\n    }\n\n    const mutationFnContext = {\n      client: this.#client,\n      meta: this.options.meta,\n      mutationKey: this.options.mutationKey,\n    } satisfies MutationFunctionContext\n\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error('No mutationFn found'))\n        }\n\n        return this.options.mutationFn(variables, mutationFnContext)\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: 'failed', failureCount, error })\n      },\n      onPause: () => {\n        this.#dispatch({ type: 'pause' })\n      },\n      onContinue,\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this),\n    })\n\n    const restored = this.state.status === 'pending'\n    const isPaused = !this.#retryer.canStart()\n\n    try {\n      if (restored) {\n        // Dispatch continue action to unpause restored mutation\n        onContinue()\n      } else {\n        this.#dispatch({ type: 'pending', variables, isPaused })\n        // Notify cache callback\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this as Mutation<unknown, unknown, unknown, unknown>,\n          mutationFnContext,\n        )\n        const context = await this.options.onMutate?.(\n          variables,\n          mutationFnContext,\n        )\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: 'pending',\n            context,\n            variables,\n            isPaused,\n          })\n        }\n      }\n      const data = await this.#retryer.start()\n\n      // Notify cache callback\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this as Mutation<unknown, unknown, unknown, unknown>,\n        mutationFnContext,\n      )\n\n      await this.options.onSuccess?.(\n        data,\n        variables,\n        this.state.context!,\n        mutationFnContext,\n      )\n\n      // Notify cache callback\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this as Mutation<unknown, unknown, unknown, unknown>,\n        mutationFnContext,\n      )\n\n      await this.options.onSettled?.(\n        data,\n        null,\n        variables,\n        this.state.context,\n        mutationFnContext,\n      )\n\n      this.#dispatch({ type: 'success', data })\n      return data\n    } catch (error) {\n      try {\n        // Notify cache callback\n        await this.#mutationCache.config.onError?.(\n          error as any,\n          variables,\n          this.state.context,\n          this as Mutation<unknown, unknown, unknown, unknown>,\n          mutationFnContext,\n        )\n\n        await this.options.onError?.(\n          error as TError,\n          variables,\n          this.state.context,\n          mutationFnContext,\n        )\n\n        // Notify cache callback\n        await this.#mutationCache.config.onSettled?.(\n          undefined,\n          error as any,\n          this.state.variables,\n          this.state.context,\n          this as Mutation<unknown, unknown, unknown, unknown>,\n          mutationFnContext,\n        )\n\n        await this.options.onSettled?.(\n          undefined,\n          error as TError,\n          variables,\n          this.state.context,\n          mutationFnContext,\n        )\n        throw error\n      } finally {\n        this.#dispatch({ type: 'error', error: error as TError })\n      }\n    } finally {\n      this.#mutationCache.runNext(this)\n    }\n  }\n\n  #dispatch(action: Action<TData, TError, TVariables, TOnMutateResult>): void {\n    const reducer = (\n      state: MutationState<TData, TError, TVariables, TOnMutateResult>,\n    ): MutationState<TData, TError, TVariables, TOnMutateResult> => {\n      switch (action.type) {\n        case 'failed':\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error,\n          }\n        case 'pause':\n          return {\n            ...state,\n            isPaused: true,\n          }\n        case 'continue':\n          return {\n            ...state,\n            isPaused: false,\n          }\n        case 'pending':\n          return {\n            ...state,\n            context: action.context,\n            data: undefined,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: 'pending',\n            variables: action.variables,\n            submittedAt: Date.now(),\n          }\n        case 'success':\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: 'success',\n            isPaused: false,\n          }\n        case 'error':\n          return {\n            ...state,\n            data: undefined,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: 'error',\n          }\n      }\n    }\n    this.state = reducer(this.state)\n\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action)\n      })\n      this.#mutationCache.notify({\n        mutation: this,\n        type: 'updated',\n        action,\n      })\n    })\n  }\n}\n\nexport function getDefaultState<\n  TData,\n  TError,\n  TVariables,\n  TOnMutateResult,\n>(): MutationState<TData, TError, TVariables, TOnMutateResult> {\n  return {\n    context: undefined,\n    data: undefined,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: 'idle',\n    variables: undefined,\n    submittedAt: 0,\n  }\n}\n","import { useQuery } from '@tanstack/react-query'\n\nimport { booksQueryApi } from './books.api'\n\n// Query keys\nexport const booksQueryKeys = {\n  all: ['books'],\n  search: (searchQuery?: string) => [...booksQueryKeys.all, 'search', searchQuery],\n}\n\n// Hooks\nexport const useBooksQuery = (searchQuery?: string, options?: { enabled?: boolean }) => {\n  return useQuery({\n    queryKey: booksQueryKeys.search(searchQuery),\n    queryFn: (opt) => booksQueryApi(opt, { search: searchQuery }),\n    enabled: options?.enabled !== false,\n  })\n}\n","export { default as SlugBlockComponent } from './slug-block'\n\n","// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const onMutateResult = this.#currentResult.context;\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey\n        };\n        if (action?.type === \"success\") {\n          this.#mutateOptions.onSuccess?.(\n            action.data,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            action.data,\n            null,\n            variables,\n            onMutateResult,\n            context\n          );\n        } else if (action?.type === \"error\") {\n          this.#mutateOptions.onError?.(\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            void 0,\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError\n} from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","'use client'\n\nimport { type FC, useEffect, useState } from 'react'\nimport { useTranslations } from 'next-intl'\nimport { useQueryClient } from '@tanstack/react-query'\n\nimport { useRouter } from 'next/navigation'\n\nimport { authClient } from '@/app/entities/auth/authClient'\nimport { useUserQuery, userQueryKeys } from '@/app/entities/api/user'\nimport { booksQueryKeys } from '@/app/entities/api/books/books.query'\nimport { favoritesKeys } from '@/app/entities/api/favorites/favorites.query'\nimport { Button } from '@/app/shared/ui'\n\n// interface\ninterface IProps {}\n\n// component\nconst AuthBlockComponent: FC<Readonly<IProps>> = () => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const t = useTranslations('Auth')\n  const queryClient = useQueryClient()\n  const router = useRouter()\n\n  const { data: user, isLoading: userLoading, error } = useUserQuery()\n\n  const checkAuth = async () => {\n    try {\n      const session = await authClient.getSession()\n\n      if (session && 'data' in session && session.data) {\n        setIsAuthenticated(true)\n      } else {\n        setIsAuthenticated(false)\n      }\n    } catch (_error) {\n      setIsAuthenticated(false)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    checkAuth()\n  }, [])\n\n  const handleGoogleSignIn = async () => {\n    try {\n      const result = await authClient.signIn.social({\n        provider: 'google',\n        callbackURL: '/',\n      })\n\n      if (result && 'user' in result && result.user) {\n        setIsAuthenticated(true)\n      }\n    } catch (_error) {}\n  }\n\n  const handleGoogleSignUp = async () => {\n    try {\n      const result = await authClient.signIn.social({\n        provider: 'google',\n        callbackURL: '/?action=signup',\n      })\n\n      if (result && 'user' in result && result.user) {\n        setIsAuthenticated(true)\n      }\n    } catch (_error) {}\n  }\n\n  const handleSignOut = async () => {\n    try {\n      await authClient.signOut()\n      setIsAuthenticated(false)\n\n      // Clear all cache\n      queryClient.clear()\n\n      queryClient.setQueryData(userQueryKeys.current(), null)\n\n      queryClient.setQueryData(booksQueryKeys.all, undefined)\n      queryClient.setQueryData(favoritesKeys.all, undefined)\n\n      // Invalidate all queries\n      await queryClient.invalidateQueries({ queryKey: ['user'] })\n      await queryClient.invalidateQueries({ queryKey: booksQueryKeys.all })\n      await queryClient.invalidateQueries({ queryKey: favoritesKeys.all })\n\n      // Redirect to signin\n      router.push('/signin')\n    } catch (_error) {}\n  }\n\n  if (loading || userLoading) {\n    return <div>Loading...</div>\n  }\n\n  // return\n  return (\n    <div className='flex items-center gap-2'>\n      {isAuthenticated && user ? (\n        <>\n          <span className='text-lg font-medium'>Hello, {user.name || user.email}!</span>\n\n          <Button variant='outline' onClick={handleSignOut}>\n            {t('signOut')}\n          </Button>\n        </>\n      ) : (\n        <div className='flex gap-2'>\n          <Button variant='outline' onClick={handleGoogleSignIn}>\n            {t('signIn')}\n          </Button>\n\n          <Button onClick={handleGoogleSignUp}>{t('signUp')}</Button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default AuthBlockComponent\n","export { default as CustomCardComponent } from './curstom-card'\n","'use client'\n\nimport { type FC } from 'react'\n\nimport { useBooksQuery } from '@/app/entities/api/books/books.query'\nimport { useFavoritesQuery, useToggleFavoriteMutation } from '@/app/entities/api/favorites/favorites.query'\nimport { useUserQuery } from '@/app/entities/api/user/user.query'\nimport { CustomCardComponent } from '@/app/shared/ui/components/custom-card'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, Skeleton } from '@/app/shared/ui'\n\n// interface\ninterface IProps {\n  searchQuery?: string\n}\n\n// component\nconst BooksListBlockComponent: FC<Readonly<IProps>> = (props) => {\n  const { searchQuery = '' } = props\n\n  const { data: user, isLoading: userLoading, error: userError } = useUserQuery()\n  const { data: books, isLoading, error } = useBooksQuery(searchQuery, { enabled: !!user })\n  const { data: favorites } = useFavoritesQuery()\n  const toggleFavorite = useToggleFavoriteMutation()\n\n  const favoritesList = Array.isArray(favorites) ? favorites : []\n\n  if (!user || userError) {\n    return (\n      <div className='space-y-4'>\n        <h2 className='text-xl font-semibold'>Books from Database</h2>\n        <Card>\n          <CardContent className='pt-6'>\n            <div className='text-muted-foreground text-center'>Please sign in to view books</div>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  if (userLoading) {\n    return (\n      <div className='space-y-4'>\n        <h2 className='text-xl font-semibold'>Books from Database</h2>\n        <div className='flex justify-center py-8'>\n          <Card className='w-64'>\n            <CardContent className='pt-6'>\n              <div className='text-muted-foreground text-center'>Loading...</div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    )\n  }\n\n  // Show loading state\n  if (isLoading) {\n    return (\n      <div className='space-y-4'>\n        <h2 className='text-xl font-semibold'>Books from Database</h2>\n        <div className='grid gap-4 md:grid-cols-2 lg:grid-cols-3'>\n          {Array.from({ length: 6 }).map((_, i) => (\n            <Card key={i}>\n              <CardHeader>\n                <Skeleton className='h-5 w-3/4' />\n\n                <Skeleton className='mt-2 h-4 w-1/2' />\n              </CardHeader>\n\n              <CardContent>\n                <Skeleton className='h-4 w-1/3' />\n\n                <Skeleton className='mt-3 h-4 w-full' />\n\n                <Skeleton className='mt-2 h-4 w-5/6' />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className='flex justify-center py-8'>\n        <Card className='border-destructive w-64'>\n          <CardContent className='pt-6'>\n            <div className='text-destructive text-center'>Error loading books</div>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  // return\n  return (\n    <div className='space-y-4'>\n      <h2 className='text-xl font-semibold'>Books from Database</h2>\n\n      {books && books.length === 0 ? (\n        <Card>\n          <CardContent className='pt-6'>\n            <div className='text-muted-foreground text-center'>No books found</div>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className='grid gap-4 md:grid-cols-2 lg:grid-cols-3'>\n          {books?.map((book) => (\n            <CustomCardComponent\n              key={book.id}\n              title={book.title}\n              author={book.author}\n              publishedYear={book.publishedYear}\n              description={book.description}\n              href={`/${book.id}`}\n              isFavorite={favoritesList.some((f) => f.id === book.id)}\n              onToggle={() =>\n                toggleFavorite.mutate({ bookId: book.id, isFavorite: favoritesList.some((f) => f.id === book.id) })\n              }\n              loading={toggleFavorite.isPending}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default BooksListBlockComponent\n","'use client'\n\nimport { type FC } from 'react'\nimport { useTranslations } from 'next-intl'\nimport { useForm } from 'react-hook-form'\n\nimport { Button, Form, FormControl, FormField, FormItem, FormMessage, Input } from '@/app/shared/ui'\n\n// interface\ninterface IProps {\n  onSearch: (query: string) => void\n  initialValue?: string\n}\n\ninterface SearchFormData {\n  query: string\n}\n\n// component\nconst SearchFormBlockComponent: FC<Readonly<IProps>> = (props) => {\n  const { onSearch, initialValue = '' } = props\n\n  const t = useTranslations()\n\n  const form = useForm<SearchFormData>({\n    defaultValues: {\n      query: initialValue,\n    },\n  })\n\n  const onSubmit = (data: SearchFormData) => {\n    onSearch(data.query)\n  }\n\n  // return\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className='w-full max-w-md'>\n        <div className='flex gap-2'>\n          <FormField\n            control={form.control}\n            name='query'\n            rules={{\n              maxLength: { value: 100, message: 'Query too long' },\n            }}\n            render={({ field }) => (\n              <FormItem className='flex-1'>\n                <FormControl>\n                  <Input {...field} placeholder={t('Search.placeholder')} className='w-full' />\n                </FormControl>\n\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <Button type='submit' disabled={form.formState.isSubmitting} className='shrink-0'>\n            {form.formState.isSubmitting ? t('Search.searching') : t('Search.button')}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  )\n}\n\nexport default SearchFormBlockComponent\n","import { QueryFunctionContext } from '@tanstack/react-query'\n\nimport { restApiFetcher } from '@/pkg/libraries/rest-api'\n\nimport { type IBook } from '../../models/book.model'\n\nexport const booksQueryApi = async (opt: QueryFunctionContext, queryParams?: { search?: string }) => {\n  const { search } = queryParams || {}\n\n  const hasSearch = search && search.trim().length > 0\n  const url = hasSearch ? `api/books?search=${encodeURIComponent(search.trim())}` : 'api/books'\n\n  const res = await restApiFetcher\n    .get<IBook[]>(url, {\n      signal: opt.signal,\n      cache: 'force-cache',\n      next: { revalidate: 30 },\n    })\n    .json()\n\n  if (!res) {\n    throw new Error('Books not found')\n  }\n\n  return res\n}\n","import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query'\n\nimport { addFavorite, fetchFavorites, removeFavorite, type FavoriteBook } from './favorites.api'\n\nexport const favoritesKeys = {\n    all: ['favorites'] as const,\n}\n\nexport function useFavoritesQuery() {\n    return useQuery<FavoriteBook[]>({\n        queryKey: favoritesKeys.all,\n        queryFn: fetchFavorites,\n    })\n}\n\nexport function useToggleFavoriteMutation() {\n    const queryClient = useQueryClient()\n    return useMutation({\n        mutationFn: async (payload: { bookId: number; isFavorite: boolean }) => {\n            if (payload.isFavorite) return removeFavorite(payload.bookId)\n            return addFavorite(payload.bookId)\n        },\n        onMutate: async (payload: { bookId: number; isFavorite: boolean }) => {\n            await queryClient.cancelQueries({ queryKey: favoritesKeys.all })\n            const previous = queryClient.getQueryData<FavoriteBook[]>(favoritesKeys.all) ?? []\n            const optimistic = payload.isFavorite\n                ? previous.filter((b) => b.id !== payload.bookId)\n                : [...previous, { id: payload.bookId } as FavoriteBook]\n            queryClient.setQueryData(favoritesKeys.all, optimistic)\n            return { previous }\n        },\n        onError: (_err, _vars, ctx) => {\n            if (ctx?.previous) queryClient.setQueryData(favoritesKeys.all, ctx.previous)\n        },\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: favoritesKeys.all })\n        },\n    })\n}\n\n\n","import { restApiFetcher } from '@/pkg/libraries/rest-api'\n\nexport type FavoriteBook = {\n    id: number\n    title: string\n    author: string\n    publishedYear: number\n    description?: string\n    createdAt: string\n    updatedAt: string\n}\n\nexport async function fetchFavorites(): Promise<FavoriteBook[]> {\n    const response = await restApiFetcher.get('api/favorites')\n\n    // If response is not ok (e.g., 401 Unauthorized), return empty array\n    if (!response.ok) {\n        return []\n    }\n\n    const data = await response.json<FavoriteBook[]>()\n\n    // Ensure we always return an array\n    return Array.isArray(data) ? data : []\n}\n\nexport async function addFavorite(bookId: number): Promise<{ ok: true }> {\n    return await restApiFetcher.post('api/favorites', { json: { bookId } }).json<{ ok: true }>()\n}\n\nexport async function removeFavorite(bookId: number): Promise<{ ok: true }> {\n    return await restApiFetcher.delete(`api/favorites?bookId=${bookId}`).json<{ ok: true }>()\n}\n\n\n"],"names":[],"mappings":"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","ignoreList":[3,4]}