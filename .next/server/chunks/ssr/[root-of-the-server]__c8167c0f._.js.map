{"version":3,"sources":["turbopack:///[project]/node_modules/@tanstack/react-query/build/modern/useQuery.js/__nextjs-internal-proxy.mjs","turbopack:///[project]/node_modules/@tanstack/react-query/src/useQuery.ts","turbopack:///[project]/src/app/modules/slug/slug.module.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/app/(app)/[locale]/[id]/page.tsx","turbopack:///[project]/src/app/modules/slug/index.ts","turbopack:///[project]/src/app/entities/api/books/slug.api.ts","turbopack:///[project]/src/app/entities/api/books/slug.query.ts"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const useQuery = registerClientReference(\n    function() { throw new Error(\"Attempted to call useQuery() from the server but useQuery is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/node_modules/@tanstack/react-query/build/modern/useQuery.js\",\n    \"useQuery\",\n);\n","'use client'\nimport { QueryObserver } from '@tanstack/query-core'\nimport { useBaseQuery } from './useBaseQuery'\nimport type {\n  DefaultError,\n  NoInfer,\n  QueryClient,\n  QueryKey,\n} from '@tanstack/query-core'\nimport type {\n  DefinedUseQueryResult,\n  UseQueryOptions,\n  UseQueryResult,\n} from './types'\nimport type {\n  DefinedInitialDataOptions,\n  UndefinedInitialDataOptions,\n} from './queryOptions'\n\nexport function useQuery<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  options: DefinedInitialDataOptions<TQueryFnData, TError, TData, TQueryKey>,\n  queryClient?: QueryClient,\n): DefinedUseQueryResult<NoInfer<TData>, TError>\n\nexport function useQuery<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  options: UndefinedInitialDataOptions<TQueryFnData, TError, TData, TQueryKey>,\n  queryClient?: QueryClient,\n): UseQueryResult<NoInfer<TData>, TError>\n\nexport function useQuery<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  options: UseQueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n  queryClient?: QueryClient,\n): UseQueryResult<NoInfer<TData>, TError>\n\nexport function useQuery(options: UseQueryOptions, queryClient?: QueryClient) {\n  return useBaseQuery(options, QueryObserver, queryClient)\n}\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/modules/slug/slug.module.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/modules/slug/slug.module.tsx\",\n    \"default\",\n);\n","import { type FC } from 'react'\nimport { dehydrate, HydrationBoundary } from '@tanstack/react-query'\n\nimport { SlugModule } from '@/app/modules/slug'\nimport { slugBookQueryApi } from '@/app/entities/api/books/slug.api'\nimport { booksQueryKeys } from '@/app/entities/api/books/slug.query'\nimport { getQueryClient } from '@/pkg/libraries/rest-api/service'\n\n// interface\ninterface IProps {\n  params: Promise<{ id: string; locale: string }>\n}\n\nexport const revalidate = 30\n\n// component\nconst SlugPage: FC<Readonly<IProps>> = async (props) => {\n  const { params } = props\n  const { id } = await params\n  const idNum = Number(id)\n\n  const queryClient = getQueryClient()\n\n  if (Number.isFinite(idNum) && idNum > 0) {\n    await queryClient.prefetchQuery({\n      queryKey: booksQueryKeys.search(idNum),\n      queryFn: (opt) => slugBookQueryApi(opt, { id: idNum }),\n    })\n  }\n\n  // return\n  return (\n    <HydrationBoundary state={dehydrate(queryClient)}>\n      <SlugModule id={idNum} />\n    </HydrationBoundary>\n  )\n}\n\nexport default SlugPage\n","export { default as SlugModule } from './slug.module'","import { QueryFunctionContext } from '@tanstack/react-query'\n\nimport { restApiFetcher } from '@/pkg/libraries/rest-api'\n\nimport { type IBook } from '../../models/book.model'\n\n// interface\ninterface IProps {\n    id: number\n}\n\n// component\nexport const slugBookQueryApi = async (\n    opt: QueryFunctionContext,\n    params: Readonly<IProps>\n) => {\n    const { id } = params\n\n    if (typeof id !== 'number' || isNaN(id)) {\n        throw new Error('Invalid or missing book id')\n    }\n\n    const res = await restApiFetcher\n        .get<IBook>(`api/slugBook?id=${id}`, {\n            signal: opt.signal,\n            cache: 'force-cache',\n            next: { revalidate: 30 },\n        })\n        .json()\n\n    if (!res) {\n        throw new Error('Book not found')\n    }\n\n    return res\n}\n","import { useQuery } from '@tanstack/react-query'\n\nimport { slugBookQueryApi } from './slug.api'\n\n// Query keys\nexport const booksQueryKeys = {\n    all: ['id'],\n    search: (id?: number) => [...booksQueryKeys.all, 'id', id],\n}\n\n// Hooks\nexport const useSlugQuery = (id?: number) => {\n    return useQuery({\n        enabled: typeof id === 'number' && Number.isFinite(id) && id > 0,\n        queryKey: booksQueryKeys.search(id),\n        queryFn: (opt) => slugBookQueryApi(opt, { id: id as number }),\n    })\n}\n"],"names":[],"mappings":"qUAEO,IAAM,EAAW,CAAA,EAAA,AADxB,EAAA,CAAA,CAAA,OACwB,uBAAA,AAAuB,EAC3C,WAAa,MAAM,AAAI,MAAM,8NAAgO,EAC7P,4FACA,0DAHG,IAAM,EAAW,CAAA,EADxB,AACwB,EADxB,CAAA,CAAA,OACwB,uBAAuB,AAAvB,EACpB,WAAa,MAAM,AAAI,MAAM,8NAAgO,EAC7P,wEACA,2HEHW,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,sSAAwS,EACrU,qEACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAuB,AAAvB,EACX,WAAa,MAAM,AAAI,MAAM,kRAAoR,EACjT,iDACA,mICJJ,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OCDA,EAAA,EAAA,CAAA,CAAA,OCEA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAUO,IAAM,EAAmB,MAC5B,EACA,KAEA,GAAM,IAAE,CAAE,CAAE,CAAG,EAEf,GAAkB,UAAd,OAAO,GAAmB,MAAM,GAChC,EADqC,IAC/B,AAAI,MAAM,8BAGpB,IAAM,EAAM,MAAM,EAAA,cAAc,CAC3B,GAAG,CAAQ,CAAC,gBAAgB,EAAE,EAAA,CAAI,CAAE,CACjC,OAAQ,EAAI,MAAM,CAClB,MAAO,cACP,KAAM,CAAE,WAAY,EAAG,CAC3B,GACC,IAAI,GAET,GAAI,CAAC,EACD,GADM,GACI,AAAJ,MAAU,kBAGpB,OAAO,CACX,ECnCA,EAAA,CAAA,CAAA,OAKO,IAAM,EAAiB,CAC1B,IAAK,CAAC,KAAK,CACX,OAAQ,AAAC,GAAgB,IAAI,EAAe,GAAG,CAAE,KAAM,EAAG,AAC9D,EHFA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAUA,IAAM,EAAiC,MAAO,IAC5C,GAAM,QAAE,CAAM,CAAE,CAAG,EACb,IAAE,CAAE,CAAE,CAAG,MAAM,EACf,EAAQ,OAAO,GAEf,EAAc,CAAA,EAAA,EAAA,cAAA,AAAc,IAUlC,OARI,OAAO,QAAQ,CAAC,IAAU,EAAQ,GACpC,AADuC,MACjC,EAAY,aAAa,CAAC,CAC9B,SAAU,EAAe,MAAM,CAAC,GAChC,QAAS,AAAC,GAAQ,EAAiB,EAAK,CAAE,GAAI,CAAM,EACtD,GAKA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAAC,MAAO,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,YAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,GAAI,KAGtB,mBAEe,iBAzBW","ignoreList":[0,2]}