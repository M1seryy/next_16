{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/config/env/env.client.ts"],"sourcesContent":["import { z } from 'zod'\n\nimport { createEnv } from '@t3-oss/env-nextjs'\n\n// env client\nexport const envClient = createEnv({\n  client: {\n    NEXT_PUBLIC_APP_URL: z.string().optional(),\n  },\n  emptyStringAsUndefined: true,\n  runtimeEnv: {\n    NEXT_PUBLIC_APP_URL: process.env.NEXT_PUBLIC_APP_URL,\n  },\n})\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;AAGO,MAAM,YAAY,IAAA,0KAAS,EAAC;IACjC,QAAQ;QACN,qBAAqB,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAC1C;IACA,wBAAwB;IACxB,YAAY;QACV,mBAAmB;IACrB;AACF","debugId":null}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/config/env/env.server.ts"],"sourcesContent":["import { z } from 'zod'\n\nimport { createEnv } from '@t3-oss/env-nextjs'\n\n// env server (server-only secrets)\nexport const envServer = createEnv({\n  server: {\n    DATABASE_URL: z.string().min(1, 'DATABASE_URL is required'),\n    GOOGLE_CLIENT_ID: z.string().optional(),\n    GOOGLE_CLIENT_SECRET: z.string().optional(),\n  },\n  runtimeEnv: {\n    DATABASE_URL: process.env.DATABASE_URL,\n    GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\n    GOOGLE_CLIENT_SECRET: process.env.GOOGLE_CLIENT_SECRET,\n  },\n})\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;AAGO,MAAM,YAAY,IAAA,0KAAS,EAAC;IACjC,QAAQ;QACN,cAAc,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAChC,kBAAkB,kLAAC,CAAC,MAAM,GAAG,QAAQ;QACrC,sBAAsB,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAC3C;IACA,YAAY;QACV,cAAc,QAAQ,GAAG,CAAC,YAAY;QACtC,kBAAkB,QAAQ,GAAG,CAAC,gBAAgB;QAC9C,sBAAsB,QAAQ,GAAG,CAAC,oBAAoB;IACxD;AACF","debugId":null}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/config/env/index.ts"],"sourcesContent":["export * from './env.client'\nexport * from './env.server'\n"],"names":[],"mappings":";AAAA;AACA","debugId":null}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/integrations/supabase/schemas/books.schema.ts"],"sourcesContent":["import { integer, pgTable, serial, text, timestamp } from 'drizzle-orm/pg-core'\n\nexport const books = pgTable('books', {\n  id: serial('id').primaryKey(),\n  title: text('title').notNull(),\n  author: text('author').notNull(),\n  publishedYear: integer('published_year').notNull(),\n  description: text('description'),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n})\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEO,MAAM,QAAQ,IAAA,gKAAO,EAAC,SAAS;IACpC,IAAI,IAAA,2KAAM,EAAC,MAAM,UAAU;IAC3B,OAAO,IAAA,uKAAI,EAAC,SAAS,OAAO;IAC5B,QAAQ,IAAA,uKAAI,EAAC,UAAU,OAAO;IAC9B,eAAe,IAAA,6KAAO,EAAC,kBAAkB,OAAO;IAChD,aAAa,IAAA,uKAAI,EAAC;IAClB,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;AACzD","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/integrations/supabase/schemas/users.schema.ts"],"sourcesContent":["import { boolean, pgTable, text, timestamp } from 'drizzle-orm/pg-core'\n\nexport const users = pgTable('users', {\n  id: text('id').primaryKey(),\n  email: text('email').notNull().unique(),\n  name: text('name'),\n  emailVerified: boolean('email_verified').default(false).notNull(),\n  image: text('image'),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n})\n\nexport const sessions = pgTable('sessions', {\n  id: text('id').primaryKey(),\n  userId: text('user_id')\n    .notNull()\n    .references(() => users.id, { onDelete: 'cascade' }),\n  expiresAt: timestamp('expires_at').notNull(),\n  token: text('token').notNull().unique(),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n  ipAddress: text('ip_address'),\n  userAgent: text('user_agent'),\n})\n\nexport const accounts = pgTable('accounts', {\n  id: text('id').primaryKey(),\n  userId: text('user_id')\n    .notNull()\n    .references(() => users.id, { onDelete: 'cascade' }),\n  accountId: text('account_id').notNull(),\n  providerId: text('provider_id').notNull(),\n  accessToken: text('access_token'),\n  refreshToken: text('refresh_token'),\n  idToken: text('id_token'),\n  accessTokenExpiresAt: timestamp('access_token_expires_at'),\n  refreshTokenExpiresAt: timestamp('refresh_token_expires_at'),\n  scope: text('scope'),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n})\n\nexport const verification = pgTable('verification', {\n  id: text('id').primaryKey(),\n  identifier: text('identifier').notNull(),\n  value: text('value').notNull(),\n  expiresAt: timestamp('expires_at').notNull(),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n})\n\nexport type User = typeof users.$inferSelect\nexport type Session = typeof sessions.$inferSelect\nexport type Account = typeof accounts.$inferSelect\nexport type Verification = typeof verification.$inferSelect\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;;AAEO,MAAM,QAAQ,IAAA,gKAAO,EAAC,SAAS;IACpC,IAAI,IAAA,uKAAI,EAAC,MAAM,UAAU;IACzB,OAAO,IAAA,uKAAI,EAAC,SAAS,OAAO,GAAG,MAAM;IACrC,MAAM,IAAA,uKAAI,EAAC;IACX,eAAe,IAAA,6KAAO,EAAC,kBAAkB,OAAO,CAAC,OAAO,OAAO;IAC/D,OAAO,IAAA,uKAAI,EAAC;IACZ,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;AACzD;AAEO,MAAM,WAAW,IAAA,gKAAO,EAAC,YAAY;IAC1C,IAAI,IAAA,uKAAI,EAAC,MAAM,UAAU;IACzB,QAAQ,IAAA,uKAAI,EAAC,WACV,OAAO,GACP,UAAU,CAAC,IAAM,MAAM,EAAE,EAAE;QAAE,UAAU;IAAU;IACpD,WAAW,IAAA,iLAAS,EAAC,cAAc,OAAO;IAC1C,OAAO,IAAA,uKAAI,EAAC,SAAS,OAAO,GAAG,MAAM;IACrC,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,uKAAI,EAAC;IAChB,WAAW,IAAA,uKAAI,EAAC;AAClB;AAEO,MAAM,WAAW,IAAA,gKAAO,EAAC,YAAY;IAC1C,IAAI,IAAA,uKAAI,EAAC,MAAM,UAAU;IACzB,QAAQ,IAAA,uKAAI,EAAC,WACV,OAAO,GACP,UAAU,CAAC,IAAM,MAAM,EAAE,EAAE;QAAE,UAAU;IAAU;IACpD,WAAW,IAAA,uKAAI,EAAC,cAAc,OAAO;IACrC,YAAY,IAAA,uKAAI,EAAC,eAAe,OAAO;IACvC,aAAa,IAAA,uKAAI,EAAC;IAClB,cAAc,IAAA,uKAAI,EAAC;IACnB,SAAS,IAAA,uKAAI,EAAC;IACd,sBAAsB,IAAA,iLAAS,EAAC;IAChC,uBAAuB,IAAA,iLAAS,EAAC;IACjC,OAAO,IAAA,uKAAI,EAAC;IACZ,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;AACzD;AAEO,MAAM,eAAe,IAAA,gKAAO,EAAC,gBAAgB;IAClD,IAAI,IAAA,uKAAI,EAAC,MAAM,UAAU;IACzB,YAAY,IAAA,uKAAI,EAAC,cAAc,OAAO;IACtC,OAAO,IAAA,uKAAI,EAAC,SAAS,OAAO;IAC5B,WAAW,IAAA,iLAAS,EAAC,cAAc,OAAO;IAC1C,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;AACzD","debugId":null}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/integrations/supabase/schemas/favorites.schema.ts"],"sourcesContent":["import { index, integer, pgTable, serial, text, timestamp, uniqueIndex } from 'drizzle-orm/pg-core'\n\nimport { books } from './books.schema'\nimport { users } from './users.schema'\n\nexport const favorites = pgTable(\n    'favorites',\n    {\n        id: serial('id').primaryKey(),\n        userId: text('user_id')\n            .notNull()\n            .references(() => users.id, { onDelete: 'cascade' }),\n        bookId: integer('book_id')\n            .notNull()\n            .references(() => books.id, { onDelete: 'cascade' }),\n        createdAt: timestamp('created_at').defaultNow().notNull(),\n    },\n    (table) => ({\n        userBookUnique: uniqueIndex('favorites_user_book_unique').on(table.userId, table.bookId),\n        userIdx: index('favorites_user_idx').on(table.userId),\n        bookIdx: index('favorites_book_idx').on(table.bookId),\n    }),\n)\n\nexport type Favorite = typeof favorites.$inferSelect\nexport type NewFavorite = typeof favorites.$inferInsert\n\n\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;;;;AAEO,MAAM,YAAY,IAAA,gKAAO,EAC5B,aACA;IACI,IAAI,IAAA,2KAAM,EAAC,MAAM,UAAU;IAC3B,QAAQ,IAAA,uKAAI,EAAC,WACR,OAAO,GACP,UAAU,CAAC,IAAM,6KAAK,CAAC,EAAE,EAAE;QAAE,UAAU;IAAU;IACtD,QAAQ,IAAA,6KAAO,EAAC,WACX,OAAO,GACP,UAAU,CAAC,IAAM,6KAAK,CAAC,EAAE,EAAE;QAAE,UAAU;IAAU;IACtD,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;AAC3D,GACA,CAAC,QAAU,CAAC;QACR,gBAAgB,IAAA,sKAAW,EAAC,8BAA8B,EAAE,CAAC,MAAM,MAAM,EAAE,MAAM,MAAM;QACvF,SAAS,IAAA,gKAAK,EAAC,sBAAsB,EAAE,CAAC,MAAM,MAAM;QACpD,SAAS,IAAA,gKAAK,EAAC,sBAAsB,EAAE,CAAC,MAAM,MAAM;IACxD,CAAC","debugId":null}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/integrations/supabase/schemas/index.ts"],"sourcesContent":["export * from './books.schema'\nexport * from './users.schema'\nexport * from './favorites.schema'\n"],"names":[],"mappings":";AAAA;AACA;AACA","debugId":null}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/integrations/supabase/drizzle/drizzle.server.ts"],"sourcesContent":["import { drizzle } from 'drizzle-orm/postgres-js'\nimport postgres from 'postgres'\n\nimport { envServer } from '@/config/env'\n\nimport * as schema from '../schemas'\n\nconst connectionString = envServer.DATABASE_URL!\n\nconst client = postgres(connectionString)\nexport const db = drizzle(client, { schema })\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;AAAA;AAEA;AAAA;;;;;AAEA,MAAM,mBAAmB,kJAAS,CAAC,YAAY;AAE/C,MAAM,SAAS,IAAA,mJAAQ,EAAC;AACjB,MAAM,KAAK,IAAA,qKAAO,EAAC,QAAQ;IAAE,QAAA;AAAO","debugId":null}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/integrations/supabase/drizzle/index.ts"],"sourcesContent":["export { db } from './drizzle.server'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/integrations/better-auth/auth.config.ts"],"sourcesContent":["import { betterAuth } from 'better-auth'\nimport { drizzleAdapter } from 'better-auth/adapters/drizzle'\n\nimport { db } from '@/pkg/integrations/supabase/drizzle'\nimport { accounts, sessions, users, verification } from '@/pkg/integrations/supabase/schemas'\n\nexport const auth = betterAuth({\n    secrets: [process.env.AUTH_SECRET!],\n    database: drizzleAdapter(db, {\n        provider: 'pg',\n        schema: {\n            user: users,\n            session: sessions,\n            account: accounts,\n            verification: verification,\n        },\n    }),\n    socialProviders: {\n        google: {\n            clientId: process.env.GOOGLE_CLIENT_ID!,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n        },\n    },\n    session: {\n        expiresIn: 60 * 60 * 24 * 7,\n        updateAge: 60 * 60 * 24,\n    },\n    trustedOrigins: [\n        'http://localhost:3000',\n        process.env.NEXT_PUBLIC_APP_URL || 'https://your-app.vercel.app'\n    ],\n})\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;;;;;AAEO,MAAM,OAAO,IAAA,gOAAU,EAAC;IAC3B,SAAS;QAAC,QAAQ,GAAG,CAAC,WAAW;KAAE;IACnC,UAAU,IAAA,oMAAc,EAAC,4KAAE,EAAE;QACzB,UAAU;QACV,QAAQ;YACJ,MAAM,6KAAK;YACX,SAAS,gLAAQ;YACjB,SAAS,gLAAQ;YACjB,cAAc,oLAAY;QAC9B;IACJ;IACA,iBAAiB;QACb,QAAQ;YACJ,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAClD;IACJ;IACA,SAAS;QACL,WAAW,KAAK,KAAK,KAAK;QAC1B,WAAW,KAAK,KAAK;IACzB;IACA,gBAAgB;QACZ;QACA,6DAAmC;KACtC;AACL","debugId":null}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/libraries/locale/routing.ts"],"sourcesContent":["import { defineRouting } from 'next-intl/routing'\n\nexport const routing = defineRouting({\n  locales: ['en', 'uk'],\n  localePrefix: 'as-needed',\n  localeDetection: true,\n  defaultLocale: 'en',\n})\n\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,UAAU,IAAA,mPAAa,EAAC;IACnC,SAAS;QAAC;QAAM;KAAK;IACrB,cAAc;IACd,iBAAiB;IACjB,eAAe;AACjB","debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/libraries/locale/index.ts"],"sourcesContent":["export * from './routing'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/middleware.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport createIntlMiddleware from 'next-intl/middleware'\n\nimport { auth } from './pkg/integrations/better-auth/auth.config'\nimport { routing } from './pkg/libraries/locale'\n\nconst intlMiddleware = createIntlMiddleware(routing)\n\nconst publicRoutePaths = ['/signin', '/signup']\n\nconst isPublicRoute = (pathname: string): boolean => {\n  const pathWithoutLocale = pathname.replace(/^\\/[a-z]{2}(\\/|$)/, '/') || '/'\n\n  return publicRoutePaths.some((route) => pathWithoutLocale.startsWith(route))\n}\n\nexport default async function middleware(request: NextRequest) {\n  const pathname = request.nextUrl.pathname\n\n  if (isPublicRoute(pathname) || pathname.startsWith('/api/')) {\n    return intlMiddleware(request)\n  }\n\n  // Check authentication\n  try {\n    const session = await auth.api.getSession({\n      headers: request.headers,\n    })\n\n    if (!session) {\n      const localeMatch = pathname.match(/^\\/([a-z]{2})(\\/|$)/)\n      const locale = localeMatch ? localeMatch[1] : routing.defaultLocale\n\n      const url = request.nextUrl.clone()\n      url.pathname = `/${locale}/signin`\n      url.searchParams.set('redirect', pathname)\n      return NextResponse.redirect(url)\n    }\n\n    return intlMiddleware(request)\n  } catch (error) {\n    // Log error for debugging\n    console.error('[Middleware] Auth check error:', error)\n\n    return intlMiddleware(request)\n  }\n}\n\nexport const config = {\n  runtime: 'nodejs',\n  matcher: ['/((?!api|_next|.*\\\\..*).*)'],\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB,IAAA,iMAAoB,EAAC,uJAAO;AAEnD,MAAM,mBAAmB;IAAC;IAAW;CAAU;AAE/C,MAAM,gBAAgB,CAAC;IACrB,MAAM,oBAAoB,SAAS,OAAO,CAAC,qBAAqB,QAAQ;IAExE,OAAO,iBAAiB,IAAI,CAAC,CAAC,QAAU,kBAAkB,UAAU,CAAC;AACvE;AAEe,eAAe,WAAW,OAAoB;IAC3D,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IAEzC,IAAI,cAAc,aAAa,SAAS,UAAU,CAAC,UAAU;QAC3D,OAAO,eAAe;IACxB;IAEA,uBAAuB;IACvB,IAAI;QACF,MAAM,UAAU,MAAM,sKAAI,CAAC,GAAG,CAAC,UAAU,CAAC;YACxC,SAAS,QAAQ,OAAO;QAC1B;QAEA,IAAI,CAAC,SAAS;YACZ,MAAM,cAAc,SAAS,KAAK,CAAC;YACnC,MAAM,SAAS,cAAc,WAAW,CAAC,EAAE,GAAG,uJAAO,CAAC,aAAa;YAEnE,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;YACjC,IAAI,QAAQ,GAAG,CAAC,CAAC,EAAE,OAAO,OAAO,CAAC;YAClC,IAAI,YAAY,CAAC,GAAG,CAAC,YAAY;YACjC,OAAO,8IAAY,CAAC,QAAQ,CAAC;QAC/B;QAEA,OAAO,eAAe;IACxB,EAAE,OAAO,OAAO;QACd,0BAA0B;QAC1B,QAAQ,KAAK,CAAC,kCAAkC;QAEhD,OAAO,eAAe;IACxB;AACF;AAEO,MAAM,SAAS;IACpB,SAAS;IACT,SAAS;QAAC;KAA6B;AACzC","debugId":null}}]
}