{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/libraries/rest-api/service/rest-api.service.ts"],"sourcesContent":["import { defaultShouldDehydrateQuery, isServer, keepPreviousData, QueryClient } from '@tanstack/react-query'\n\nlet browserQueryClient: QueryClient | undefined = undefined\n\n// make query client\nconst makeQueryClient = () => {\n  return new QueryClient({\n    defaultOptions: {\n      queries: {\n        staleTime: 5 * 60 * 1000,\n        gcTime: 10 * 60 * 1000,\n        networkMode: 'offlineFirst',\n        refetchOnWindowFocus: false,\n        placeholderData: keepPreviousData,\n      },\n      dehydrate: {\n        shouldDehydrateQuery: (query) => {\n          return defaultShouldDehydrateQuery(query) || query.state.status === 'pending'\n        },\n      },\n    },\n  })\n}\n\n// query client\nexport const getQueryClient = () => {\n  if (isServer) {\n    return makeQueryClient()\n  } else {\n    if (!browserQueryClient) browserQueryClient = makeQueryClient()\n    return browserQueryClient\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;;AAEA,IAAI,qBAA8C;AAElD,oBAAoB;AACpB,MAAM,kBAAkB;IACtB,OAAO,IAAI,4LAAW,CAAC;QACrB,gBAAgB;YACd,SAAS;gBACP,WAAW,IAAI,KAAK;gBACpB,QAAQ,KAAK,KAAK;gBAClB,aAAa;gBACb,sBAAsB;gBACtB,iBAAiB,2LAAgB;YACnC;YACA,WAAW;gBACT,sBAAsB,CAAC;oBACrB,OAAO,IAAA,0MAA2B,EAAC,UAAU,MAAM,KAAK,CAAC,MAAM,KAAK;gBACtE;YACF;QACF;IACF;AACF;AAGO,MAAM,iBAAiB;IAC5B,IAAI,mLAAQ,EAAE;QACZ,OAAO;IACT,OAAO;QACL,IAAI,CAAC,oBAAoB,qBAAqB;QAC9C,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/libraries/rest-api/service/index.ts"],"sourcesContent":["export { getQueryClient } from './rest-api.service'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/app/modules/slug/slug.module.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/modules/slug/slug.module.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/modules/slug/slug.module.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwS,GACrU,sEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/app/modules/slug/slug.module.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/modules/slug/slug.module.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/modules/slug/slug.module.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/app/modules/slug/index.ts"],"sourcesContent":["export { default as SlugModule } from './slug.module'"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/libraries/rest-api/fetcher/rest-api.fetcher.ts"],"sourcesContent":["import ky, { type KyInstance } from 'ky'\n\n// fetcher\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    return window.location.origin\n  }\n  return process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000'\n}\n\nexport const restApiFetcher: KyInstance = ky.create({\n  prefixUrl: getBaseUrl(),\n  credentials: 'include',\n  throwHttpErrors: false,\n  hooks: {\n    beforeRequest: [\n      (request) => {\n        if (typeof window === 'undefined' && request.url.startsWith('/')) {\n          const fullUrl = new URL(request.url, getBaseUrl()).toString()\n          return new Request(fullUrl, request)\n        }\n        return request\n      },\n    ],\n    afterResponse: [\n      (request, options, response) => {\n        return response\n      },\n    ],\n  },\n})\n"],"names":[],"mappings":";;;;AAAA;;AAEA,UAAU;AACV,MAAM,aAAa;IACjB;;IAGA,OAAO,6DAAmC;AAC5C;AAEO,MAAM,iBAA6B,sKAAE,CAAC,MAAM,CAAC;IAClD,WAAW;IACX,aAAa;IACb,iBAAiB;IACjB,OAAO;QACL,eAAe;YACb,CAAC;gBACC,IAAI,kDAAkB,eAAe,QAAQ,GAAG,CAAC,UAAU,CAAC,MAAM;oBAChE,MAAM,UAAU,IAAI,IAAI,QAAQ,GAAG,EAAE,cAAc,QAAQ;oBAC3D,OAAO,IAAI,QAAQ,SAAS;gBAC9B;gBACA,OAAO;YACT;SACD;QACD,eAAe;YACb,CAAC,SAAS,SAAS;gBACjB,OAAO;YACT;SACD;IACH;AACF","debugId":null}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/pkg/libraries/rest-api/index.ts"],"sourcesContent":["export { restApiFetcher } from './fetcher/rest-api.fetcher'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/app/entities/api/books/slug.api.ts"],"sourcesContent":["import { QueryFunctionContext } from '@tanstack/react-query'\n\nimport { restApiFetcher } from '@/pkg/libraries/rest-api'\n\nimport { type IBook } from '../../models/book.model'\n\n// interface\ninterface IProps {\n    id: number\n}\n\n// component\nexport const slugBookQueryApi = async (\n    opt: QueryFunctionContext,\n    params: Readonly<IProps>\n) => {\n    const { id } = params\n\n    if (typeof id !== 'number' || isNaN(id)) {\n        throw new Error('Invalid or missing book id')\n    }\n\n    const res = await restApiFetcher\n        .get<IBook>(`api/slugBook?id=${id}`, {\n            signal: opt.signal,\n            cache: 'force-cache',\n            next: { revalidate: 30 },\n        })\n        .json()\n\n    if (!res) {\n        throw new Error('Book not found')\n    }\n\n    return res\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;;AAUO,MAAM,mBAAmB,OAC5B,KACA;IAEA,MAAM,EAAE,EAAE,EAAE,GAAG;IAEf,IAAI,OAAO,OAAO,YAAY,MAAM,KAAK;QACrC,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,MAAM,MAAM,6LAAc,CAC3B,GAAG,CAAQ,CAAC,gBAAgB,EAAE,IAAI,EAAE;QACjC,QAAQ,IAAI,MAAM;QAClB,OAAO;QACP,MAAM;YAAE,YAAY;QAAG;IAC3B,GACC,IAAI;IAET,IAAI,CAAC,KAAK;QACN,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO;AACX","debugId":null}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/app/entities/api/books/slug.query.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query'\n\nimport { slugBookQueryApi } from './slug.api'\n\n// Query keys\nexport const booksQueryKeys = {\n    all: ['id'],\n    search: (id?: number) => [...booksQueryKeys.all, 'id', id],\n}\n\n// Hooks\nexport const useSlugQuery = (id?: number) => {\n    return useQuery({\n        enabled: typeof id === 'number' && Number.isFinite(id) && id > 0,\n        queryKey: booksQueryKeys.search(id),\n        queryFn: (opt) => slugBookQueryApi(opt, { id: id as number }),\n    })\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAEA;;;AAGO,MAAM,iBAAiB;IAC1B,KAAK;QAAC;KAAK;IACX,QAAQ,CAAC,KAAgB;eAAI,eAAe,GAAG;YAAE;YAAM;SAAG;AAC9D;AAGO,MAAM,eAAe,CAAC;IACzB,OAAO,IAAA,uLAAQ,EAAC;QACZ,SAAS,OAAO,OAAO,YAAY,OAAO,QAAQ,CAAC,OAAO,KAAK;QAC/D,UAAU,eAAe,MAAM,CAAC;QAChC,SAAS,CAAC,MAAQ,IAAA,yKAAgB,EAAC,KAAK;gBAAE,IAAI;YAAa;IAC/D;AACJ","debugId":null}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///Users/victorhachkajlo/Desktop/new-project/src/app/%28app%29/%5Blocale%5D/%5Bid%5D/page.tsx"],"sourcesContent":["import { type FC } from 'react'\nimport { HydrationBoundary, dehydrate } from '@tanstack/react-query'\n\nimport { getQueryClient } from '@/pkg/libraries/rest-api/service'\nimport { SlugModule } from '@/app/modules/slug'\nimport { slugBookQueryApi } from '@/app/entities/api/books/slug.api'\nimport { booksQueryKeys } from '@/app/entities/api/books/slug.query'\n\n// interface\ninterface IProps {\n  params: Promise<{ id: string; locale: string }>\n}\n\nexport const revalidate = 30\n\n// component\nconst SlugPage: FC<Readonly<IProps>> = async (props) => {\n  const { params } = props\n  const { id } = await params\n  const idNum = Number(id)\n\n  const queryClient = getQueryClient()\n\n  if (Number.isFinite(idNum) && idNum > 0) {\n    await queryClient.prefetchQuery({\n      queryKey: booksQueryKeys.search(idNum),\n      queryFn: (opt) => slugBookQueryApi(opt, { id: idNum }),\n    })\n  }\n\n  // return\n  return (\n    <HydrationBoundary state={dehydrate(queryClient)}>\n      <SlugModule id={idNum} />\n    </HydrationBoundary>\n  )\n}\n\nexport default SlugPage\n"],"names":[],"mappings":";;;;;;;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AACA;;;;;;;AAOO,MAAM,aAAa;AAE1B,YAAY;AACZ,MAAM,WAAiC,OAAO;IAC5C,MAAM,EAAE,MAAM,EAAE,GAAG;IACnB,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,QAAQ,OAAO;IAErB,MAAM,cAAc,IAAA,6LAAc;IAElC,IAAI,OAAO,QAAQ,CAAC,UAAU,QAAQ,GAAG;QACvC,MAAM,YAAY,aAAa,CAAC;YAC9B,UAAU,yKAAc,CAAC,MAAM,CAAC;YAChC,SAAS,CAAC,MAAQ,IAAA,yKAAgB,EAAC,KAAK;oBAAE,IAAI;gBAAM;QACtD;IACF;IAEA,SAAS;IACT,qBACE,8OAAC,yMAAiB;QAAC,OAAO,IAAA,wLAAS,EAAC;kBAClC,cAAA,8OAAC,uMAAU;YAAC,IAAI;;;;;;;;;;;AAGtB;uCAEe","debugId":null}}]
}